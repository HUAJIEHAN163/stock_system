# 📋 版本管理规范

## 🎯 概述

本文档规定了股票分析系统的版本管理流程和文档更新要求，确保版本发布的一致性和可追溯性。

## 📁 版本文件结构

```
stock_system/
├── version/                    # 版本管理文件夹
│   ├── VERSION.md             # 版本信息文档
│   └── CHANGELOG.md           # 更新日志
├── src/
│   └── __version__.py         # 程序版本模块
└── doc/
    └── 版本管理规范.md        # 本文档
```

## 🔄 版本变更流程

### 1. 版本号规则
- 格式: `v主版本.次版本.修订版本-预发布标识`
- 示例: `v0.5.0-beta`, `v1.0.0`, `v1.0.1`

### 2. 版本类型
- **主版本**: 重大架构变更或不兼容更新
- **次版本**: 新功能添加或重要改进
- **修订版本**: Bug修复或小幅优化
- **预发布**: alpha(内测) → beta(公测) → rc(候选) → stable(正式)

## 📝 版本发布时必须更新的文档

### 🔴 必须更新 (每次版本发布)

#### 1. 程序版本模块 (`src/__version__.py`)
```python
__version__ = "0.6.0-beta"  # 更新版本号
BUILD_DATE = "2024-12"      # 更新构建日期
```

#### 2. 版本信息文档 (`version/VERSION.md`)
- 更新当前版本号和发布日期
- 添加新版本的功能特性描述
- 更新版本历史记录
- 调整版本规划时间线

#### 3. 更新日志 (`version/CHANGELOG.md`)
- 添加新版本的详细变更记录
- 按类型分类: 新增/改进/修复/移除/安全性
- 记录具体的功能变更和Bug修复

#### 4. 项目进度文档 (`doc/项目进度.md`)
- 更新总体进度百分比
- 调整各阶段完成状态
- 更新关键指标数据
- 修改下一步计划

### 🟡 建议更新 (重要版本发布)

#### 5. 主README文档 (`README.md`)
- 更新版本号引用
- 调整功能特性描述
- 更新安装和使用说明

#### 6. 安装指南 (`INSTALL.md`)
- 更新依赖包版本要求
- 调整安装步骤说明
- 更新功能使用指南

#### 7. 系统结构说明 (`doc/系统结构说明.md`)
- 更新架构图和模块说明
- 调整技术栈描述

### 🟢 可选更新 (根据变更内容)

#### 8. API文档
- 如有API变更，更新相关文档
- 调整接口说明和示例

#### 9. 用户手册
- 新功能的使用说明
- 界面变更的操作指导

## ⚡ 快速更新检查清单

### 版本发布前检查 ✅

- [ ] `src/__version__.py` - 版本号和构建日期
- [ ] `version/VERSION.md` - 当前版本信息
- [ ] `version/CHANGELOG.md` - 新版本变更记录
- [ ] `doc/项目进度.md` - 进度状态更新
- [ ] `README.md` - 版本号引用 (如需要)
- [ ] `INSTALL.md` - 安装说明 (如需要)
- [ ] 主窗口标题显示正确版本号
- [ ] 关于对话框显示正确信息
- [ ] 程序启动显示正确版本

### 版本发布后验证 ✅

- [ ] 所有文档版本号一致
- [ ] 程序运行显示正确版本
- [ ] 功能变更已记录在CHANGELOG
- [ ] 项目进度反映实际状态

## 🔧 自动化建议

### 版本号同步脚本 (建议开发)
```python
# update_version.py
def update_all_version_files(new_version):
    # 更新 __version__.py
    # 更新 VERSION.md 
    # 提醒更新 CHANGELOG.md
    # 检查版本号一致性
```

### Git标签管理
```bash
# 创建版本标签
git tag -a v0.6.0-beta -m "Release v0.6.0-beta"

# 推送标签
git push origin v0.6.0-beta
```

## 📊 版本管理最佳实践

### 1. 版本发布节奏
- **Alpha版本**: 每2周发布，内部测试
- **Beta版本**: 每月发布，公开测试  
- **RC版本**: 功能冻结后发布
- **正式版本**: 充分测试后发布

### 2. 文档维护原则
- **及时性**: 版本发布同时更新文档
- **一致性**: 所有文档版本号保持一致
- **完整性**: 重要变更必须有文档记录
- **可追溯**: 保持完整的版本历史

### 3. 质量控制
- 版本发布前进行文档审查
- 使用检查清单确保完整性
- 定期检查版本号一致性

## 🚨 注意事项

### 常见错误
- ❌ 忘记更新程序中的版本号
- ❌ CHANGELOG记录不完整
- ❌ 各文档版本号不一致
- ❌ 项目进度未及时更新

### 避免方法
- ✅ 使用检查清单
- ✅ 版本发布前统一检查
- ✅ 建立版本发布流程
- ✅ 考虑自动化工具

---

*遵循此规范可确保版本管理的规范性和一致性*